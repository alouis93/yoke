<template name="search">
  <div class="collection">
    {{#esEach id="search" index="users"}}


    <a href="/users/{{_id}}" class="collection-item">
      {{profile.name}}
      {{#unless isCurrentUser _id}}
      {{#if isFollowing _id}}
      <a data-user-id="{{_id}}" data-username="{{profile.name}}" class="btn-floating flat-red right follow-state unfollow">
        <i class="mdi-content-add"></i>
      </a> {{else}}
    <a data-user-id="{{_id}}" data-username="{{profile.name}}" class="btn-floating flat-red right follow-state follow">
      <i class="mdi-content-add"></i>
    </a>
    {{/if}} {{/unless}}
    </a>

    {{/esEach}}
  </div>
  {{> esLoadMoreButton id="search" index="users"}} {{#ifEsHasNoResults id="search" index="users"}}
  <div class="no-results">No results found!</div>
  {{/ifEsHasNoResults}} {{#ifEsIsSearching id="search" index="users"}}
  <div class="preloader-wrapper small active search-loader">
    <div class="spinner-layer spinner-green-only">
      <div class="circle-clipper left">
        <div class="circle"></div>
      </div>
      <div class="gap-patch">
        <div class="circle"></div>
      </div>
      <div class="circle-clipper right">
        <div class="circle"></div>
      </div>
    </div>
  </div>
  {{/ifEsIsSearching}}
</template>